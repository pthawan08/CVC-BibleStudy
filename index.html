<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ</title>
    <link rel="icon" type="image/png" href="logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style> body { font-family: 'Sarabun', sans-serif; } </style>
</head>
<body class="bg-gray-50 min-h-screen relative">

    <div class="absolute top-4 right-4 z-10">
        <a href="checkin.html" class="bg-white border border-[#C5A66B] text-[#C5A66B] px-4 py-2 rounded-lg shadow-sm hover:bg-[#C5A66B] hover:text-white transition font-bold text-sm flex items-center gap-2">
            <span>üìù</span> ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        </a>
    </div>

    <div class="max-w-2xl mx-auto bg-white shadow-xl rounded-lg overflow-hidden my-10">
        <div class="bg-[#C5A66B] p-6 text-center text-white pt-12 md:pt-6">
            <h1 class="text-2xl font-bold">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ</h1>
            <p class="mt-2 text-sm opacity-90">‡∏Ç‡∏≠‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏£‡∏∞‡∏ß‡∏à‡∏ô‡∏∞</p>
        </div>

        <div class="p-8">
            <form id="regisForm" class="space-y-6">
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700 border-b pb-2">1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h3>
                    <div><label class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label><input type="text" name="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2 bg-gray-50"></div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-medium text-gray-700">‡πÄ‡∏û‡∏®</label><select name="gender" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2 bg-gray-50"><option>‡∏ä‡∏≤‡∏¢</option><option>‡∏´‡∏ç‡∏¥‡∏á</option></select></div>
                        <div><label class="block text-sm font-medium text-gray-700">‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠ (‡∏õ‡∏µ)</label><input type="text" name="faithAge" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2 bg-gray-50"></div>
                    </div>
                    <div><label class="block text-sm font-medium text-gray-700">‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡∏à‡∏±‡∏Å‡∏£</label><input type="text" name="church" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm border p-2 bg-gray-50"></div>
                </div>

                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700 border-b pb-2">2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
                    <div class="flex items-center space-x-6">
                        <label class="flex items-center cursor-pointer"><input type="radio" name="studyType" value="full" checked onclick="toggleSubjects(false)" class="text-[#C5A66B]"><span class="ml-2">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£</span></label>
                        <label class="flex items-center cursor-pointer"><input type="radio" name="studyType" value="subject" onclick="toggleSubjects(true)" class="text-[#C5A66B]"><span class="ml-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</span></label>
                    </div>
                    <div id="subjectList" class="hidden bg-gray-50 p-4 rounded-md border space-y-2">
                        <p class="text-sm font-bold text-gray-700">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤:</p>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡∏ô" class="mr-2"> 1. ‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡∏ô</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô" class="mr-2"> 2. ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏°‡∏±‡∏™‡∏Å‡∏≤‡∏£" class="mr-2"> 3. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏°‡∏±‡∏™‡∏Å‡∏≤‡∏£</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡∏ô" class="mr-2"> 4. ‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡∏ô</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤" class="mr-2"> 5. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô" class="mr-2"> 6. ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï" class="mr-2"> 7. ‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô" class="mr-2"> 8. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</label>
                        <label class="flex items-center"><input type="checkbox" name="subjects" value="‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡∏à‡∏±‡∏Å‡∏£" class="mr-2"> 9. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡∏à‡∏±‡∏Å‡∏£</label>
                    </div>
                </div>

                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700 border-b pb-2">3. ‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h3>
                    <div class="bg-[#FDF6E9] p-5 rounded-lg border border-[#E8DCC3] text-center">
                        <p class="font-bold text-lg text-[#8B6E3D]">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå</p>
                        <p class="text-4xl font-bold my-3 select-all">428-177789-8</p>
                        <div class="text-sm text-gray-600">
                            ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤ ‡∏ô‡∏≤‡∏ó‡∏®‡∏¥‡πÇ‡∏£‡∏£‡∏±‡∏ï‡∏ô‡πå<br>‡∏™‡∏∏‡∏ò‡∏≤‡∏ó‡∏¥‡∏û‡∏¢‡πå ‡πÇ‡∏û‡∏ò‡∏¥‡πå‡∏®‡∏£‡∏µ‡∏ó‡∏≠‡∏á, ‡∏≠‡∏±‡∏ç‡∏ä‡∏•‡∏µ ‡πÄ‡∏õ‡∏µ‡πà‡∏¢‡∏°‡∏™‡∏∏‡∏Ç
                        </div>
                        <button type="button" onclick="copyAccount()" class="mt-4 text-xs bg-white border border-[#C5A66B] text-[#C5A66B] px-4 py-2 rounded-full hover:bg-[#C5A66B] hover:text-white transition">üìã ‡∏Å‡∏î‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
                    </div>
                    <div><label class="block text-sm font-medium text-gray-700">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ</label><input type="file" id="slipFile" accept="image/*" required class="mt-1 block w-full text-sm text-gray-500 file:bg-[#C5A66B] file:text-white file:border-0 file:rounded-full file:px-4 file:py-2"/></div>
                </div>

                <button type="submit" id="submitBtn" class="w-full bg-gray-800 text-white py-4 rounded-lg font-bold text-lg shadow-lg hover:bg-gray-900 transition">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
            </form>
        </div>
    </div>

    <script>
        // üî¥üî¥ ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ üî¥üî¥
        const WEB_APP_URL = "‡∏ß‡∏≤‡∏á_URL_‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å_Apps_Script_‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ"; 

        function toggleSubjects(show) {
            document.getElementById('subjectList').classList.toggle('hidden', !show);
        }

        function copyAccount() {
            navigator.clipboard.writeText("428-177789-8");
            Swal.fire({ icon: 'success', title: '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß', toast: true, position: 'top-end', showConfirmButton: false, timer: 1500 });
        }

        document.getElementById('regisForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...';
            btn.disabled = true;

            try {
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                
                // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£)
                let subjects = [];
                if(data.studyType === 'full') {
                    subjects = [
                        "‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡∏ô", "‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏£‡∏∞‡∏Ñ‡∏±‡∏°‡∏†‡∏µ‡∏£‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô", "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏°‡∏±‡∏™‡∏Å‡∏≤‡∏£",
                        "‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡∏ô", "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤", "‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô",
                        "‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï", "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô", "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡∏à‡∏±‡∏Å‡∏£"
                    ];
                } else {
                    document.querySelectorAll('input[name="subjects"]:checked').forEach((cb) => subjects.push(cb.value));
                    if(subjects.length === 0) throw new Error("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ß‡∏¥‡∏ä‡∏≤");
                }
                data.subjects = subjects;

                // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                const fileInput = document.getElementById('slipFile');
                if (fileInput.files.length > 0) {
                    const reader = new FileReader();
                    reader.readAsDataURL(fileInput.files[0]);
                    reader.onload = function () {
                        data.slipImage = reader.result;
                        sendData(data, btn, originalText);
                    };
                } else {
                    sendData(data, btn, originalText);
                }
            } catch (error) {
                Swal.fire('Error', error.message, 'error');
                btn.disabled = false;
                btn.innerHTML = originalText;
            }
        });

        function sendData(data, btn, originalText) {
            fetch(WEB_APP_URL, {
                method: 'POST',
                headers: { "Content-Type": "text/plain;charset=utf-8" },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(response => {
                if(response.result === 'success') {
                    Swal.fire({ icon: 'success', title: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', confirmButtonColor: '#C5A66B' }).then(() => window.location.reload());
                } else {
                    throw new Error(response.message);
                }
            })
            .catch(error => {
                Swal.fire('Error', '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'error');
                btn.disabled = false;
                btn.innerHTML = originalText;
            });
        }
    </script>
</body>
</html>
